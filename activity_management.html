<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>高教深耕彙整平台|活動管理</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport" />
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="bower_components/Ionicons/css/ionicons.min.css" />
    <link rel="stylesheet" href="bower_components/jvectormap/jquery-jvectormap.css" />
    <link rel="stylesheet" href="dist/css/AdminLTE.min.css" />
    <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css" />
    <link rel="stylesheet" href="bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic" />
    <style>
        .message {
            border-style: solid;
            border-color: gray;
            margin-left: 20px;
            width: 975px;
        }
    </style>
</head>

<body class="hold-transition skin-blue sidebar-mini">
    <form>
        <div class="wrapper">
            <header class="main-header">
                <a href="index.html" class="logo" style="height: 64px">
                    <span class="logo-mini"><b></b></span> <span class="logo-lg"><b>高教深耕彙整平台</b></span>
                </a>
                <nav class="navbar navbar-static-top">
                    <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button" style="height: 64px;">
                        <span class="sr-only">Toggle navigation</span>
                    </a>
                    <div class="navbar-custom-menu">
                        <ul class="nav navbar-nav">
                            <li class="dropdown user user-menu">
                                <a>
                                    <span class="hidden-xs" style="font-size:20px" id="username">User Name&nbsp;</span>
                                    <span class="hidden-xs" style="font-size:16px" id="usertitle">User
                                        Title&nbsp;</span>
                                    <button type="button" class="btn" style="color:#707070" id="logout_btn">
                                        登出
                                    </button>
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </header>

            <aside class="main-sidebar">
                <section class="sidebar">
                    <ul id="menu" class="sidebar-menu" data-widget="tree"></ul>
                </section>
            </aside>

            <div class="content-wrapper" style="min-height: 960px;">
                <br />
                <section class="content-header">
                    <h1 style="margin-left:20px;font-size: 30px">報告書管理 <small>活動管理</small></h1>
                </section>

                <section class="content" style="margin-left:10px;margin-right:10px;">
                    <div class="form-class" style="margin-left:20px;margin-top:10px;margin-bottom:10px;">
                        <label for="inputEmail3">
                            <font color="red">*</font>年度：
                        </label>
                        <select style="height:30px;width:10%;margin-left:0.5%;margin-right:1.5%;" id="index_type_year" class="index_type_year"></select>
                    </div>
                    <div style="border-radius:5px; border-style:solid; border-color:#8C8C8C;margin-left:20px;margin-right:20px;margin-top:5px;">
                        <div id="activity">
                            <form>
                                <div class="box-body" style="margin-left:20px;margin-top:4px;margin-bottom:4px;">
                                    <div class="form-class">
                                        <label for="inputEmail3">
                                            <font color="red">*</font>所屬主軸名稱：
                                        </label>
                                        <select style="height:30px;width:25%;margin-left:0.5%;margin-right:1.5%;" id="activity_main_name" class="activity_main"></select>
                                        <label for="inputEmail3">
                                            <font color="red">*</font>所屬分項名稱：
                                        </label>
                                        <select style="height:30px;width:25%;margin-left:0.5%;margin-right:1.5%;" id="activity_item_name" class="activity_item"></select>
                                    </div>
                                    <div class="form-class" style="margin-top:1%;">
                                        <label for="inputEmail3">
                                            <font color="red">*</font>所屬策略名稱：
                                        </label>
                                        <select style="height:30px;width:25%;margin-left:0.5%;margin-right:1.5%;" id="activity_strategy_name" class="activity_strategy"></select>
                                    </div>
                                    <div class="form-class" style="margin-top:1%;">
                                        <label for="inputEmail3">
                                            <font color="red">*</font>活動報告書承辦人：
                                        </label>
                                        <select style="height:30px;width:15%;margin-left:0.5%;" id="activity_role_name" class="main_edit selectpicker" data-live-search="true"></select>
                                        <select style="height:30px;width:15%;" id="activity_teacher" class="main_edit_teacher selectpicker" data-live-search="true"></select>
                                    </div>
                                    <div class="form-class act_activity_edit" style="margin-top:1%;">
                                        <label for="inputEmail3">
                                            <font color="red">*</font>可編輯人員：
                                        </label>
                                        <select style="height:30px;width:15%;margin-left:0.5%;" id="activity_edit_name" class="main_edit selectpicker" data-live-search="true"></select>
                                        <select style="height:30px;width:15%;" id="activity_edit_teacher" class="main_edit_teacher selectpicker" data-live-search="true"></select>
                                        <button type="button" class="button hollow circle plus_activity_btn" data-quantity="plus" data-field="quantity" style="margin-left:1%;">
                                            <i class="fa fa-plus" aria-hidden="true"></i>
                                        </button>
                                    </div>
                                    <div class="form-class" style="margin-top:1%;">
                                        <label for="inputEmail3">
                                            <font color="red">*</font>活動名稱：
                                        </label>
                                        <input type="text" id="activity_name" style="width:60%;height:30px;margin-left:0.5%;margin-right:3%;" />
                                    </div>
                                    <div class="form-class" style="margin-top:1%;">
                                        <label for="inputEmail3">
                                            <font color="red">*</font>預計執行月份：
                                        </label>
                                        <input type="text" id="activity_month" placeholder="  ex:1 or 1-3" style="width:10%;height:30px;margin-left:0.5%;margin-right:0.5%;" />
                                        <label for="inputEmail3">月</label>
                                        <input type="text" id="activity_data_id" size="10%" style="display:none;" />
                                    </div>
                                    <!--here-->
                                    <div class="form-class act_activity_ans_edit" style="margin-top:1%;">
                                        <div>
                                            <label for="inputEmail3">
                                                <font color="red">*</font>指定回答題目：
                                            </label>
                                            <select style="height:30px;width:15%;margin-left:0.5%;"
                                                id="activity_index_type" class="activity_index_type">
                                            </select>
                                            <select style="height:30px;width:15%;margin-left:0.5%;"
                                                id="activity_index_explain" class="activity_index_explain"></select>
                                            <select style="height:30px;width:15%;margin-left:0.5%;"
                                                id="activity_index_item" class="activity_index_item"></select>
                                        </div>
                                        <div style="margin-top:0.5%;">
                                            <label for="inputEmail3" style="visibility:hidden;">
                                                <font color="red">*</font>指定回答題目：
                                            </label>
                                            <select style="height:30px;width:15%;margin-left:0.5%;"
                                                id="activity_test_select" class="activity_test_select"></select>
                                            <input type="text" id="activity_ans"
                                                style="width:15%;height:30px;margin-left:0.5%;" value="如問題描述，請回答" />
                                            <select style='width:10%;height:30px;margin-left:0.5%;margin-right:5%;'
                                                id="activity_ans_type">
                                                <option value='0'>文字描述</option>
                                                <option value='1'>附檔</option>
                                            </select>
                                            <!--
                                        <select style="height:30px;width:10%;margin-left:0.5%;"
                                            id="supervisor_teacher_role" class="main_edit"></select>
                                        <select style="height:30px;width:10%;margin-left:0.5%;"
                                            id="supervisor_teacher_name"></select>-->
                                            <input type="text" id="activity_ans_id" size="5%"
                                                style="height:30px;display:none;" />
                                            <button type="button" class="button hollow circle plus_activity_ans_btn"
                                                data-quantity="plus" data-field="quantity" style="margin-left:1%;">
                                                <i class="fa fa-plus" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                    </div>
									<div class="form-class act_review_edit" style="margin-top:1%;">
										<label for="inputEmail3">
											<font color="red">*</font>審核程序：
										</label>
										<select style="height:30px;width:15%;margin-left:0.5%;" id="review_name"
                                        class="main_edit selectpicker" data-live-search="true"></select>
										<select style="height:30px;width:15%;" id="review_teacher" class="main_edit_teacher selectpicker" data-live-search="true"></select>
										<input type="text" id="review_status" class="review_status" size="5%"
                                                style="height:30px;display:none;" />
										<button type="button" class="button hollow circle plus_act_review_btn"
                                            id="plus_act_review_btn" data-quantity="plus" data-field="quantity" style="margin-left:1%;">
											<i class="fa fa-plus" aria-hidden="true"></i>
										</button>
									</div>
                                    <div class="form-class" style="margin-top:1%;">
                                        <a class="btn btn-primary" id="activity_btnadd">新增</a>
                                        <a class="btn btn-warning" id="activity_btnedit"
                                            style="display:none;">編輯</a>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div style="margin-top:20px;">
                        <a class="btn btn-danger" style="margin-left:20px;" id="btndelete">刪除</a>
                    </div>
                    <div id="activity_table" style="border-style:solid; border-color:#8C8C8C;margin-left:20px;margin-right:20px;margin-top:10px;">
                        <div class="box-header">
                            <h3 class="box-title">活動名冊</h3>
                        </div>
                        <div class="box-body" style="margin-left:10px;margin-right:20px;overflow-x:scroll;">
                            <table id="example4" class="table table-bordered table-striped">
                                <thead>
                                    <tr>
                                        <th style="display:none;">ID</th>
                                        <th>
                                            <input type="checkbox" name="activity_CheckAll" id="activity_CheckAll" />
                                        </th>
                                        <th>年度</th>
                                        <th>所屬主軸<br />-分項-策略<br />代號</th>
                                        <th>活動名稱</th>
                                        <th>預計執行月份</th>
                                        <th>負責教師</th>
                                        <th>可編輯人員</th>
                                        <th>功能</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </section>
            </div>

            <footer class="main-footer">
                <div class="pull-right hidden-xs"><b>Version</b> 2.4.0</div>
                <strong>Copyright &copy; 2014-2016 <a href="https://adminlte.io">Almsaeed Studio</a>.</strong> All rights reserved.
            </footer>

            <div class="control-sidebar-bg"></div>
        </div>
    </form>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="bower_components/fastclick/lib/fastclick.js"></script>
    <script src="dist/js/adminlte.min.js"></script>
    <script src="bower_components/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
    <script src="plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script src="bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
    <script src="dist/js/demo.js"></script>
    <script src="dist/js/cookie.js"></script>
    <script src="dist/js/activity_mange_general.js"></script>
    <script src="dist/js/activity_management.js"></script>
    <script>
        $("#btndelete").click(function(e) {
            var delete_bool = confirm("確定要刪除資料嗎?");
            if (delete_bool == true) {
                var table_type = $("#type").val();
                var table = $("#example4").DataTable();
                var $table = table.table().node();
                var $chkbox_all = $('tbody input[name="activity_checkbox"]', $table);
                var $chkbox_checked = $('tbody input[name="activity_checkbox"]:checked', $table);
                var chkbox_select_all = $('thead input[id="activity_CheckAll"]', $table).get(0);
                var Data = table.rows(".selected").data();
                var id = "0";
                for (var i = 0; i < Data.length; i++) {
                    if (id == "0") id = Data[i][0];
                    else id += "," + Data[i][0];
                }
                $.ajax({
                    type: "POST",
                    url: "phpMod/activity_delete.php",
                    async: false,
                    dataType: "json",
                    data: {
                        token: token,
                        sno_option_projects: id
                    },
                    success: function(data) {
                        if (!checkMsg(data.msg)) {
                            delete_all_cookie();
                        }
                        if (checkMsg(data.msg)) {
                            table.clear().draw();
                            show_activity_table();
                        }
                        chkbox_select_all.checked = false;
                        chkbox_select_all.indeterminate = false;
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                        alert(XMLHttpRequest.readyState + XMLHttpRequest.status + XMLHttpRequest.responseText);
                    }
                });
            }
        });
    </script>
</body>

</html>